---
const accessToken = Astro.cookies.get("sb-access-token")?.value;
const refreshToken = Astro.cookies.get("sb-refresh-token")?.value;

const isLoggedIn = accessToken && refreshToken;
---

<header class="sticky top-0 z-10 border-y border-neutral-200 bg-white">
  <div class="mx-auto flex w-[90%] max-w-[1200px] flex-wrap items-center justify-between gap-3 py-2">
    <a class="inline-flex h-8 items-center text-xl font-bold leading-none tracking-wide text-neutral-900" href="/">JuanMataku Blog</a>
    <nav class="flex items-center" aria-label="Primary">
      <ul class="flex items-center gap-6 m-0 list-none p-0">
        <li class="h-8 mt-0">
          <a class="block h-8 text-sm font-medium leading-8 text-neutral-800 hover:text-neutral-500" href="/">Home</a>
        </li>

        {isLoggedIn ? (
          <>
            <li class="h-8 mt-0">
              <a
                class="block h-8 text-sm font-medium leading-8 text-neutral-800 hover:text-neutral-500"
                href="/dashboard"
                >Dashboard</a
              >
            </li>
            <li class="flex h-8 items-center">
              <form action="/api/auth/signout" method="POST">
                <button
                  class="inline-flex h-7 items-center rounded-md border border-neutral-300 px-3 text-[11px] font-semibold uppercase leading-none tracking-[0.2em] text-neutral-800 hover:border-neutral-400"
                  type="submit"
                >
                  Sign out
                </button>
              </form>
            </li>
          </>
        ) : (
          <>
            <li class="h-8 mt-0">
              <a
                class="block h-8 text-sm font-medium leading-8 text-neutral-800 hover:text-neutral-500"
                href="/signin"
                >Sign in</a
              >
            </li>
            <li class="h-8 mt-0">
              <a
                class="block h-8 text-sm font-medium leading-8 text-neutral-800 hover:text-neutral-500"
                href="/register"
                >Register</a
              >
            </li>
          </>
        )}
      </ul>
    </nav>
  </div>
</header>
